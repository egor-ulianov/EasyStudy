{% include 'header.html' %}

<div id="app">
    <b-container fluid>
        <!-- <b-jumbotron class="smallJumbotron" header="{{header}}" lead="">
            {{hint}}
        </b-jumbotron> -->
        <b-jumbotron style="max-height: 7vh;" class="smallJumbotron" header-level="8">
            <template #header>
                <h1 style="font-size: 1.0rem; margin-bottom: -0.5em; padding: 0;">{{header}}</h1>
            </template>
            <p style="margin-top: 0px;">
                {{hint}}
            </p>
        </b-jumbotron>

        <b-form method="POST" action="{{ continuation_url }}">
    

            <b-row class="mb-3" align-h="center">
                <b-col></b-col>
                
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q1">
                                    <strong>1. Do you know what recommender systems are and how they work?</strong>
                                </b-label>
                                <b-form-select name="q1" id="q1" :state="q1Validated" v-model="selectedQ1" :options="optionsQ1"></b-form-select>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
                <b-col></b-col>
            </b-row>


            <b-row class="mb-3" align-h="center">
                <b-col></b-col>
                
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q2">
                                    <strong>2. Have you heard of the term <u>"relevance"</u> in the context of recommendations before?</strong>
                                </b-label>
                                <b-form-select name="q2" id="q2" :state="q2Validated" v-model="selectedQ2" :options="optionsYesNo"></b-form-select>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
                <b-col></b-col>
            </b-row>

            <b-row class="mb-3" align-h="center">
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q3">
                                    <strong>3. Have you heard of the term <u>"diversity"</u> in relation to recommendations previously?</strong>
                                </b-label>
                                <b-form-select name="q3" id="q3" :state="q3Validated" v-model="selectedQ3" :options="optionsYesNo"></b-form-select>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
            </b-row>

            <b-row class="mb-3" align-h="center">
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q4">
                                    <strong>4. Have you heard of the term <u>"novelty"</u> when discussing recommendations before?</strong>
                                </b-label>
                                <b-form-select name="q4" id="q4" :state="q4Validated" v-model="selectedQ4" :options="optionsYesNo"></b-form-select>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
            </b-row>

            <b-row class="mb-3" align-h="center">
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q5">
                                    <strong>5. Have you heard of the term <u>"exploration"</u> in the context of recommendations before?</strong>
                                </b-label>
                                <b-form-select name="q5" id="q5" :state="q5Validated" v-model="selectedQ5" :options="optionsYesNo"></b-form-select>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
            </b-row>

            <b-row class="mb-3" align-h="center">
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q6">
                                    <strong>6. Have you heard of the term <u>"exploitation"</u> (<u>familiarity</u>) in relation to recommendations before?</strong>
                                </b-label>
                                <b-form-select name="q6" id="q6" :state="q6Validated" v-model="selectedQ6" :options="optionsYesNo"></b-form-select>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
            </b-row>

            <b-row class="mb-3" align-h="center">
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q7">
                                    <strong>7. Please choose the statement that best describes what <u>relevant</u> recommendations mean to you</strong>
                                </b-label>
                                <b-form-select name="q7" id="q7" :state="q7Validated" v-model="selectedQ7" :options="optionsRelevance"></b-form-select>
                                <b-input name="q7Other" id="q7Other" :state="otherTextQ7 != ''" v-if="selectedQ7 === 'other'" v-model="otherTextQ7" type="text" placeholder="Please specify"/>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
            </b-row>


            <b-row class="mb-3" align-h="center">
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q8">
                                    <strong>8. Please select the statement that best describes what <u>diverse</u> recommendations mean to you</strong>
                                </b-label>
                                <b-form-select name="q8" id="q8" :state="q8Validated" v-model="selectedQ8" :options="optionsCorrespondence"></b-form-select>
                                <b-input name="q8Other" id="q8Other" :state="otherTextQ8 != ''" v-if="selectedQ8 === 'other'" v-model="otherTextQ8" type="text" placeholder="Please specify"/>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
            </b-row>

            <b-row class="mb-3" align-h="center">
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q9">
                                    <strong>9. Please choose the statement that best describes what <u>novel</u> recommendations mean to you</strong>
                                </b-label>
                                <b-form-select name="q9" id="q9" :state="q9Validated" v-model="selectedQ9" :options="optionsCorrespondence"></b-form-select>
                                <b-input name="q9Other" id="q9Other" :state="otherTextQ9 != ''" v-if="selectedQ9 === 'other'" v-model="otherTextQ9" type="text" placeholder="Please specify"/>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
            </b-row>

            <b-row class="mb-3" align-h="center">
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q10">
                                    <strong>10. Please choose the statement that best describes what <u>exploratory</u> recommendations mean to you</strong>
                                </b-label>
                                <b-form-select name="q10" id="q10" :state="q10Validated" v-model="selectedQ10" :options="optionsCorrespondence"></b-form-select>
                                <b-input name="q10Other" id="q10Other" :state="otherTextQ10 != ''" v-if="selectedQ10 === 'other'" v-model="otherTextQ10" type="text" placeholder="Please specify"/>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
            </b-row>

            <b-row class="mb-3" align-h="center">
                <b-col cols="8" >
                    <b-row align-v="center">
                        <!-- <b-col class="mt-2" cols="auto">
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                            <b-row>
                                <b-col>
                                    <b-icon class="h1" icon="grid"></b-icon>
                                </b-col>
                            </b-row>
                        </b-col> -->
                        <b-col>
                            <b-form-group>
                                <b-label for="q11">
                                    <strong>11. Please select the statement that best describes what <u>exploitational</u> (<u>familiar</u>) recommendations mean to you</strong>
                                </b-label>
                                <b-form-select name="q11" id="q11" :state="q11Validated" v-model="selectedQ11" :options="optionsCorrespondence"></b-form-select>
                                <b-input name="q11Other" id="q11Other" :state="otherTextQ11 != ''" v-if="selectedQ11 === 'other'" v-model="otherTextQ11" type="text" placeholder="Please specify"/>
                            </b-form-group>
                        </b-col>
                    </b-row>
                </b-col>
            </b-row>

            <!-- <b-row>
                <b-col>
                </b-col>
          
                <b-col>
                  <div class="d-flex align-items-center">
                    <span class="mr-2">Text 1:</span>
                    <b-form-select v-model="selectedQ1" :options="optionsQ1"></b-form-select>
                  </div>
                </b-col>
          
                <b-col>
                </b-col>
              </b-row>
          
              <b-row>
                <b-col>
                </b-col>
          
                <b-col>
                  <div class="d-flex align-items-center">
                    <span class="mr-2">Text 2:</span>
                    <b-form-select v-model="selectedQ2" :options="optionsQ2"></b-form-select>
                  </div>
                </b-col>
          
                <b-col>
                </b-col>
              </b-row> -->
              <b-row align-h="center">
                <b-col class="text-center">
                    <input type="hidden" name="csrf_token" value="{{csrf_token()}}"/>
                    <!-- <input type="hidden" name="final_questionnaire_data" value="final_questionnaire_data"/> -->
                    <b-button :disabled="!allValidated" variant="success" type="submit">{{finish}}</b-button>
                </b-col>
            </b-row>
        </b-form>
        
        

    </b-container>
</div>

<script src="{{url_for('static', filename='message_reporting.js')}}"></script>
<script src="{{url_for('static', filename='resolution_handling.js')}}"></script>
<script src="{{url_for('static', filename='interaction_reporting.js')}}"></script>
<script>

    var csrfToken = "{{csrf_token()}}";

    window.app = new Vue({
    el: '#app',
    delimiters: ['[[',']]'], // Used to replace double { escaping with double [ escaping (to prevent jinja vs vue inference)
    data: function() {
        
        return {
            selectedQ1: null,
            selectedQ2: null,
            selectedQ3: null,
            selectedQ4: null,
            selectedQ5: null,
            selectedQ6: null,
            selectedQ7: null,
            selectedQ8: null,
            selectedQ9: null,
            selectedQ10: null,
            selectedQ11: null,
            otherTextQ7: '',
            otherTextQ8: '',
            otherTextQ9: '',
            otherTextQ10: '',
            otherTextQ11: '',
            submitted: false,
            optionsQ1: [
                { value: null, text: 'Please select an option' },
                { value: '-2', text: 'No' },
                { value: '-1', text: 'A little' },
                { value: '1', text: 'Substantial knowledge' },
                { value: '2', text: 'Expert in the area' },
            ],
            optionsYesNo: [
                { value: null, text: 'Please select an option' },
                { value: '-2', text: 'No' },
                { value: '2', text: 'Yes' },
            ],
            optionsRelevance: [
                { value: null, text: 'Please select an option' },
                { value: '0', text: 'Providing items that match my with my existing interests.' },
                { value: '1', text: 'Providing items that I can utilize right now.' },
                { value: '2', text: 'Helping me to understand the variety of the offer.' },
                { value: '3', text: 'Helping me to find unexpected yet interesting items.' },
                { value: 'other', text: 'Other' },
            ],
            optionsCorrespondence: [
                { value: null, text: 'Please select an option' },
                { value: '0', text: 'Providing items that are highly different from the ones you consumed so far (e.g., genres you never watched so far).' },
                { value: '1', text: 'Showing you a selection of very heterogeneous items (e.g., each one having a different set of genres).' },
                { value: '2', text: 'Providing niche items that are not much known in general.' },
                { value: '3', text: 'Providing items that are very similar to the ones you consumed so far (e.g., genres you are used to watch).' },
                { value: 'other', text: 'Other' },
            ],
        };
    },
    methods: {
    },
    computed: {
        q1Validated() {
            return this.selectedQ1 != null; // q1 validated
        },
        q2Validated() {
            return this.selectedQ2 != null; // q2 validated
        },
        q3Validated() {
            return this.selectedQ3 != null; // q3 validated
        },
        q4Validated() {
            return this.selectedQ4 != null; // q4 validated
        },
        q5Validated() {
            return this.selectedQ5 != null; // q5 validated
        },
        q6Validated() {
            return this.selectedQ6 != null; // q6 validated
        },
        q7Validated() {
            return this.selectedQ7 != null && ((this.selectedQ7 === 'other' && this.otherTextQ7 != '') || this.selectedQ7 != 'other');
        },
        q8Validated() {
            return this.selectedQ8 != null && ((this.selectedQ8 === 'other' && this.otherTextQ8 != '') || this.selectedQ8 != 'other');
        },
        q9Validated() {
            return this.selectedQ9 != null && ((this.selectedQ9 === 'other' && this.otherTextQ9 != '') || this.selectedQ9 != 'other');
        },
        q10Validated() {
            return this.selectedQ10 != null && ((this.selectedQ10 === 'other' && this.otherTextQ10 != '') || this.selectedQ10 != 'other');
        },
        q11Validated() {
            return this.selectedQ11 != null && ((this.selectedQ11 === 'other' && this.otherTextQ11 != '') || this.selectedQ11 != 'other');
        },
        allValidated() {
            return this.q1Validated
                && this.q2Validated
                && this.q3Validated
                && this.q4Validated
                && this.q5Validated
                && this.q6Validated
                && this.q7Validated
                && this.q8Validated
                && this.q9Validated
                && this.q10Validated
                && this.q11Validated;
        }
    },
    async mounted() {
        const btns = document.querySelectorAll("button");
        const radios = document.querySelectorAll("input[type=radio]");
        const checkboxes = document.querySelectorAll("input[type=checkbox]");
        const textboxes = document.querySelectorAll("input[type=text]");
        const selects = document.querySelectorAll("select");
        
        // Register the handlers for event reporting
        startViewportChangeReportingWithLimit(`/utils/changed-viewport`, csrfToken, 1.0, true);
        startScrollReportingWithLimit(`/utils/changed-viewport`, csrfToken, 1.0, document.getElementsByName("scrollableDiv"));
        registerClickedButtonReporting(`/utils/on-input`, csrfToken, btns);
        registerClickedRadioReporting("/utils/on-input", csrfToken, radios);
        registerClickedCheckboxReporting("/utils/on-input", csrfToken, checkboxes);
        registerChangedSelectionReporting("/utils/on-input", csrfToken, selects);
        reportLoadedPage(`/utils/loaded-page`, csrfToken, "pre_study_questionnaire");
    }
})
</script>

<!-- {% if footer_override is defined and footer_override is not none %}
  <div class="footerDiv mt-3">
    {{ footer_override | safe}}
  </div>
</body>
</html>
{% else %}
{% include 'footer.html' %}
{% endif %} -->